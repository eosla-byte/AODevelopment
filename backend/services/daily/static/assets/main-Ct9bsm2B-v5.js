import"./modulepreload-polyfill-B5Qt9EMX-v5.js";document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-cursor-dot]"),o=document.querySelector("[data-cursor-outline]");window.addEventListener("mousemove",function(c){const u=c.clientX,i=c.clientY;e.style.left=`${u}px`,e.style.top=`${i}px`,o.animate({left:`${u}px`,top:`${i}px`},{duration:500,fill:"forwards"})});const s=document.querySelector(".hero-video"),r=["/Cinematic_BIM_Kitchen_Deconstruction_Animation.mp4","/Architectural_Film_Generation_Request.mp4","/Architectural_Video_Generation_Request.mp4"];let t=0;s&&s.addEventListener("ended",()=>{t=(t+1)%r.length,s.src=r[t],s.play()});const n=document.getElementById("video-reveal-section"),a=document.querySelector(".mask-overlay"),l=document.querySelector(".solid-logo-overlay");n&&a&&l&&window.addEventListener("scroll",()=>{const c=n.offsetTop,u=n.offsetHeight,i=window.scrollY,v=window.innerHeight,m=c,S=c+u-v;let p=(i-m)/(S-m);p=Math.max(0,Math.min(1,p));const f=p*100;a.style.clipPath=`inset(0 0 ${f}% 0)`,a.style.webkitClipPath=`inset(0 0 ${f}% 0)`,a.style.opacity=1;let w=(p-.5)*2;l.style.opacity=Math.max(0,Math.min(1,w))});const d={root:null,rootMargin:"0px",threshold:.1},y=new IntersectionObserver((c,u)=>{c.forEach(i=>{i.isIntersecting&&(i.target.classList.add("visible"),u.unobserve(i.target))})},d);document.querySelectorAll(".fade-on-scroll").forEach(c=>{y.observe(c)});const g=document.getElementById("vision-scroll-section"),h=document.getElementById("reveal-text");if(g&&h){const c=h.innerText;h.innerHTML="",c.split(" ").forEach(v=>{const m=document.createElement("span");m.textContent=v,m.classList.add("reveal-word"),h.appendChild(m)}),document.querySelectorAll(".reveal-word");const i=new IntersectionObserver(v=>{v.forEach(m=>{if(m.isIntersecting){document.querySelectorAll(".reveal-word").forEach((w,L)=>{setTimeout(()=>w.classList.add("active"),L*50)});const p=document.getElementById("reveal-signature");p&&p.classList.add("active");const f=document.getElementById("stats-counter");if(f&&!f.classList.contains("animated")){f.classList.add("active"),f.classList.add("animated");const w=window.aoStats?.projects||50,L=window.aoStats?.sqm||1500351;E("stat-projects",0,w,2e3,"+"),E("stat-countries",0,2,1e3,""),E("stat-sqm",0,L,2500,"+")}i.unobserve(m.target)}})},{threshold:.3});g&&i.observe(g)}const M=document.getElementById("main-header");window.addEventListener("scroll",()=>{window.scrollY>50?M.classList.add("force-collapse"):M.classList.remove("force-collapse")})});function E(e,o,s,r,t=""){const n=document.getElementById(e);if(!n)return;let a=null;const l=d=>{a||(a=d);const y=Math.min((d-a)/r,1),g=Math.floor(y*(s-o)+o).toLocaleString();if(n.innerHTML=t+g,y<1)window.requestAnimationFrame(l);else{const h=s.toLocaleString();n.innerHTML=t+h}};window.requestAnimationFrame(l)}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".carousel-track .hero-video");e.length>0&&(e[0].play(),e.forEach((o,s)=>{o.addEventListener("ended",()=>{const r=(s+1)%e.length,t=e[r];e[s].classList.remove("active"),t.classList.add("active"),t.load();const n=t.play();n!==void 0&&n.catch(l=>{console.error("Auto-play was prevented:",l),t.load(),t.play().catch(d=>console.error("Retry failed:",d))});const a=document.querySelector(".main-title");a&&t.dataset.text&&(a.style.opacity=0,setTimeout(()=>{a.innerText=t.dataset.text,a.style.opacity=1},500))})}))});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("sparkle-bg");if(e){for(let o=0;o<30;o++){const s=Math.random()*window.innerWidth,r=Math.random()*window.innerHeight;b(s,r,e,!1)}window.addEventListener("mousemove",o=>{if(Math.random()>.85){const s=e.getBoundingClientRect();o.clientY>=s.top&&o.clientY<=s.bottom&&b(o.clientX,o.clientY-s.top,e,!0)}})}});function b(e,o,s,r){const t=document.createElement("div"),n=Math.random()*3+1;t.style.position="absolute",t.style.left=e+"px",t.style.top=o+"px",t.style.width=n+"px",t.style.height=n+"px",t.style.background="white",t.style.borderRadius="50%",t.style.pointerEvents="none",t.style.opacity=Math.random(),t.style.boxShadow=`0 0 ${n*2}px white`,r?(t.style.transition="opacity 1s ease-out, transform 1s ease-out",setTimeout(()=>{t.style.opacity="0",t.style.transform=`translate(${Math.random()*20-10}px, ${Math.random()*20-10}px)`},50),setTimeout(()=>t.remove(),1e3)):t.style.animation=`twinkle ${Math.random()*3+2}s infinite alternate`,s.appendChild(t)}const x=document.createElement("style");x.innerHTML=`
  @keyframes twinkle {
    0% { opacity: 0.2; transform: scale(1); }
    100% { opacity: 1; transform: scale(1.2); }
  }
`;document.head.appendChild(x);document.addEventListener("DOMContentLoaded",()=>{I()});async function I(){console.log("Fetching stats from backend...");try{const e=await fetch("/api/projects/stats",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok){console.error("Failed to fetch stats:",e.statusText);return}const o=await e.json();console.log("Stats received:",o);const s=o.categories;if(o.global){window.aoStats={projects:o.global.total_projects,sqm:o.global.total_sqm};const n=document.getElementById("stat-projects"),a=document.getElementById("stat-sqm");n&&n.innerHTML.includes("+")&&(n.innerHTML="+"+o.global.total_projects.toLocaleString(),a.innerHTML="+"+o.global.total_sqm.toLocaleString())}const r=document.getElementById("project-categories"),t=new IntersectionObserver(n=>{n.forEach(a=>{a.isIntersecting&&(A(s),t.unobserve(a.target))})},{threshold:.2});r&&t.observe(r)}catch(e){console.error("Error fetching stats:",e)}}function A(e){if(e)for(const[o,s]of Object.entries(e)){const r=document.querySelectorAll(`.cat-stat-sqm[data-cat="${o}"]`),t=document.querySelectorAll(`.cat-stat-count[data-cat="${o}"]`);r.forEach(n=>{q(n,0,s.sqm,2e3,"")}),t.forEach(n=>{q(n,0,s.count,1500,"")})}}function q(e,o,s,r,t=""){if(!e)return;let n=null;const a=l=>{n||(n=l);const d=Math.min((l-n)/r,1),y=Math.floor(d*(s-o)+o);e.innerHTML=t+y.toLocaleString(),d<1?window.requestAnimationFrame(a):e.innerHTML=t+s.toLocaleString()};window.requestAnimationFrame(a)}
